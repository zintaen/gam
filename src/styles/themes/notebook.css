/* ═══════════════════════════════════════════════════════════════
   Notebook Theme — Handwritten notebook with warm paper tones
   ═══════════════════════════════════════════════════════════════ */

:root[data-style='notebook'][data-mode='light'] {
    --color-bg: #faf6ee;
    --color-bg-gradient: none;
    --color-surface: rgba(250, 246, 238, 0.8);
    --color-surface-hover: rgba(250, 246, 238, 0.95);
    --color-surface-raised: rgba(250, 246, 238, 0.5);
    --color-text: #2c1810;
    --color-text-secondary: #5a4a3a;
    --color-text-muted: #9a8a7a;
    --color-border: rgba(122, 106, 90, 0.12);
    --color-border-strong: rgba(122, 106, 90, 0.2);
    --color-primary: #228844;
    --color-primary-muted: rgba(34, 136, 68, 0.1);
    --color-accent: #2266aa;
    --color-accent-muted: rgba(34, 102, 170, 0.1);
    --color-success: #228844;
    --color-success-muted: rgba(144, 238, 144, 0.2);
    --color-warning: #f9e547;
    --color-warning-muted: rgba(249, 229, 71, 0.2);
    --color-danger: #cc3333;
    --color-danger-muted: rgba(204, 51, 51, 0.08);
    --color-info: #2266aa;
    --color-info-muted: rgba(135, 206, 235, 0.2);
    --color-focus: #d4a024;
    --color-scrollbar: #e4d8c4;
    --color-scrollbar-hover: #7a6a5a;
    --color-selection-bg: rgba(249, 229, 71, 0.4);
    --color-selection-text: #2c1810;
    --color-badge-global-bg: rgba(34, 102, 170, 0.06);
    --color-badge-global-text: #2266aa;
    --color-badge-global-border: rgba(34, 102, 170, 0.12);
    --color-badge-local-bg: rgba(119, 68, 170, 0.08);
    --color-badge-local-text: #7744aa;
    --color-badge-local-border: rgba(119, 68, 170, 0.15);
    --color-scope-active-bg: #faf6ee;

    /* Notebook-only tokens */
    --nb-paper-line: #ece1cc;
    --nb-pencil: #7a6a5a;
    --nb-eraser: #e4d8c4;
    --nb-red-margin: rgba(204, 51, 51, 0.15);
    --nb-highlight-yellow: rgba(249, 229, 71, 0.3);
    --nb-highlight-blue: rgba(135, 206, 235, 0.3);
    --nb-highlight-pink: rgba(255, 182, 193, 0.3);
    --nb-highlight-green: rgba(144, 238, 144, 0.3);

    --theme-font-sans: 'Kalam', cursive;
    --theme-font-mono: 'JetBrains Mono', monospace;
    --theme-card-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
    --theme-card-shadow: 1.5px 1.5px 0 #7a6a5a, -0.5px -0.5px 0 #7a6a5a;
    --theme-card-backdrop: none;
    --theme-btn-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
    --theme-row-hover-bg: rgba(249, 229, 71, 0.1);
}

:root[data-style='notebook'][data-mode='dark'] {
    --color-bg: #1e1c18;
    --color-bg-gradient: none;
    --color-surface: rgba(30, 28, 24, 0.8);
    --color-surface-hover: rgba(30, 28, 24, 0.95);
    --color-surface-raised: rgba(46, 42, 34, 0.5);
    --color-text: #f0e8d8;
    --color-text-secondary: #c8b898;
    --color-text-muted: #8a7e6e;
    --color-border: rgba(168, 152, 122, 0.12);
    --color-border-strong: rgba(168, 152, 122, 0.2);
    --color-primary: #44cc77;
    --color-primary-muted: rgba(68, 204, 119, 0.15);
    --color-accent: #5599dd;
    --color-accent-muted: rgba(85, 153, 221, 0.15);
    --color-success: #44cc77;
    --color-success-muted: rgba(68, 204, 119, 0.1);
    --color-warning: #f9e547;
    --color-warning-muted: rgba(249, 229, 71, 0.1);
    --color-danger: #cc3333;
    --color-danger-muted: rgba(204, 51, 51, 0.12);
    --color-info: #5599dd;
    --color-info-muted: rgba(85, 153, 221, 0.1);
    --color-focus: #e8b840;
    --color-scrollbar: #2e2a22;
    --color-scrollbar-hover: #a8987a;
    --color-selection-bg: rgba(249, 229, 71, 0.25);
    --color-selection-text: #f0e8d8;
    --color-badge-global-bg: rgba(85, 153, 221, 0.08);
    --color-badge-global-text: #5599dd;
    --color-badge-global-border: rgba(85, 153, 221, 0.12);
    --color-badge-local-bg: rgba(170, 119, 221, 0.1);
    --color-badge-local-text: #aa77dd;
    --color-badge-local-border: rgba(170, 119, 221, 0.15);
    --color-scope-active-bg: #1e1c18;

    --nb-paper-line: #2a2621;
    --nb-pencil: #a8987a;
    --nb-eraser: #2e2a22;
    --nb-red-margin: rgba(204, 51, 51, 0.1);
    --nb-highlight-yellow: rgba(249, 229, 71, 0.15);
    --nb-highlight-blue: rgba(85, 153, 221, 0.2);
    --nb-highlight-pink: rgba(170, 119, 221, 0.2);
    --nb-highlight-green: rgba(68, 204, 119, 0.15);

    --theme-font-sans: 'Kalam', cursive;
    --theme-font-mono: 'JetBrains Mono', monospace;
    --theme-card-radius: 12px;
    --theme-card-shadow: 1.5px 1.5px 0 rgba(200, 184, 152, 0.35), -0.5px -0.5px 0 rgba(200, 184, 152, 0.2);
    --theme-card-backdrop: none;
    --theme-btn-radius: 12px;
    --theme-row-hover-bg: rgba(249, 229, 71, 0.05);
}

/* ── Notebook-specific body (ruled lines) ─── */

:root[data-style='notebook'][data-mode='light'] body {
    background-image: repeating-linear-gradient(
        transparent,
        transparent 31px,
        var(--nb-paper-line) 31px,
        var(--nb-paper-line) 31.5px
    );
    background-size: 100% 32px;
    background-color: var(--color-bg);
}

:root[data-style='notebook'][data-mode='dark'] body {
    background-image: repeating-linear-gradient(
        transparent,
        transparent 31px,
        var(--nb-paper-line) 31px,
        var(--nb-paper-line) 31.5px
    );
    background-size: 100% 32px;
    background-color: var(--color-bg);
}

/* ── Notebook card style ─── */

:root[data-style='notebook'] .theme-card {
    border-radius: var(--theme-card-radius);
    box-shadow: var(--theme-card-shadow);
    backdrop-filter: none;
}

:root[data-style='notebook'] .theme-btn-primary {
    background: var(--color-primary);
    border: 1px solid var(--color-primary);
    border-radius: var(--theme-btn-radius);
    box-shadow: var(--theme-card-shadow);
}

:root[data-style='notebook'] .theme-gradient-accent {
    background: linear-gradient(90deg, var(--color-warning), #ffb6c1, #87ceeb, #90ee90, var(--color-warning));
    background-size: 200% 100%;
    animation: gradientShift 6s ease infinite;
}

:root[data-style='notebook'][data-mode='dark'] .theme-gradient-accent {
    opacity: 0.4;
}

/* ── Red margin line (notebook only) ─── */
:root[data-style='notebook'] .nb-margin-line {
    display: block;
}

:root:not([data-style='notebook']) .nb-margin-line {
    display: none;
}
